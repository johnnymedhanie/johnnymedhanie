"use strict";var app=angular.module("ives",["ngAnimate","uiGmapgoogle-maps","ngSanitize","embedCodepen"]);app.config(["uiGmapGoogleMapApiProvider",function(o){o.configure({key:"AIzaSyBgiSOyjgUXl8TTECe7j8HpIETBBVXb3zY",v:"3.17",libraries:"weather,geometry,visualization"})}]),app.config(["$sceDelegateProvider",function(o){o.resourceUrlWhitelist(["self","https://www.youtube.com/**"])}]),app.factory("ColorService",function(){function o(o){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function t(o){var t=o.split("rgb")[1];t=t.replace("(","").replace(")","").replace(" ","");var r=t.split(","),e={r:parseInt(r[0]),g:parseInt(r[1]),b:parseInt(r[2])};return e}function r(o,t){var r="rgb";return(o.a||t)&&(r+="a"),r+="("+o.r+","+o.g+","+o.b,(o.a||t)&&(r+=", "+(o.a?o.a:t)),r+=")"}function e(o,t,r){var e;return e=r?{r:Math.max(Math.floor(o.r-o.r*t),0),g:Math.max(Math.floor(o.g-o.g*t),0),b:Math.max(Math.floor(o.b-o.b*t),0)}:{r:Math.max(o.r-t,0),g:Math.max(o.g-t,0),b:Math.max(o.b-t,0)}}function n(o,t,r){var e;return e=r?{r:Math.min(Math.floor(o.r+o.r*t),255),g:Math.min(Math.floor(o.g+o.g*t),255),b:Math.min(Math.floor(o.b+o.b*t),255)}:{r:Math.min(o.r+t,255),g:Math.min(o.g+t,255),b:Math.min(o.b+t,255)}}function a(o,t){var r={};return r.r=Math.max(0,i(Math.floor((o.r+t.r)/2),0,255)),r.g=Math.max(0,i(Math.floor((o.g+t.g)/2),0,255)),r.b=Math.max(0,i(Math.floor((o.b+t.b)/2),0,255)),r}function i(o,t,r){for(;o<t||o>r;)o<t?o+=r:o-=r;return o}var s={};return{colors:s,stringToRGB:t,rgbToString:r,darken:e,lighten:n,averageColors:a,hexToRgb:o}}),app.factory("ScrollService",function(){function o(){$(".scrollfade").css("opacity",1),e=!0}function t(){if(!e){var o=$(window).scrollTop()+$(window).innerHeight();$(".scrollfade").each(function(){var t=$(this).offset().top;t+.3*$(this).outerHeight()<o&&$(this).removeClass("hidden")})}}function r(){$(".scrollfade").each(function(){$(this).addClass("hidden")})}var e=!1;return setTimeout(function(){e||(r(),t())},0),$(window).scroll(function(){return t()}),o}),app.controller("ContactController",["$scope","$http",function(o,t){var r=this;this.data={},this.sendForm=function(){t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",o.contactForm.$valid&&($(".form").toggleClass("confirm"),$(".form").stop().animate({height:225},500),t({method:"POST",url:"/mail",data:$.param(r.data),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(o,t){$(".loading").addClass("hide"),200==t?$(".done").addClass("show"):$(".failed").addClass("show")}).error(function(o,t){$(".loading").addClass("hide"),$(".failed").addClass("show")}))}}]),app.controller("MainController",["$scope","uiGmapGoogleMapApi","ColorService","ScrollService",function(o,t,r,e){function n(){var o=$("html").scrollTop(),t=$("body").scrollTop(),r=Math.max(o,t);r>50?($(".header").removeClass("navigator"),$("ng-hello").addClass("navigator")):($(".header").addClass("navigator"),$("ng-hello").removeClass("navigator"))}var a=this,i=moment("1996-12-20 15:59").startOf("minute");this.ageyears=moment().diff(i,"years"),this.agemonths=moment().subtract(this.ageyears,"years").diff(i,"months"),this.ageseconds=moment().subtract(this.ageyears,"years").subtract(this.agemonths,"months").diff(i,"seconds"),setInterval(function(){o.$apply(function(){a.ageseconds++})},1e3),t.then(function(t){o.map={center:{latitude:52.2233632,longitude:6.798508},zoom:12,control:{}}}),this.showMaps=function(){$(".angular-google-map-container").toggleClass("activated")};var s=!1;o.$watch(function(){return $(".angular-google-map-container").height()},function(t){400!=t||s||(google.maps.event.trigger(o.map.control.getGMap(),"resize"),o.map.center={latitude:52.2233632,longitude:6.798508},s=!0)},!0),this.ivesimages=[];for(var c=0;c<3;c++)this.ivesimages.push("res/images/ives"+c+".png");this.currentIves=Math.floor(3*Math.random()),this.changeIvesImage=function(){o.$$phase?a.currentIves=(a.currentIves+1)%3:o.$apply(function(){a.currentIves=(a.currentIves+1)%3})},$(".logocircle").hover(function(){$(this).find(".logo").css({color:r.rgbToString(r.colors.ultradarkcolor),"background-color":r.rgbToString(r.colors.darkcolor)})},function(){$(this).find(".logo").css({color:r.rgbToString(r.colors.lightcolor),"background-color":r.rgbToString(r.colors.ultradarkcolor)})}),o.interval=60,setTimeout(function(){o.$watch(function(){return o.triangleconfig},function(t){t&&(o.setColors(t),a.changeIvesImage())}),$(".hoverdarker").hover(function(){$(this).css("background-color",r.rgbToString(r.darken($(this).data("bgcolor"),30)))},function(){$(this).css("background-color",r.rgbToString($(this).data("bgcolor")))})},0),o.resetBG=function(){o.triangleconfig=null},o.setColors=function(o){var t=r.averageColors(r.hexToRgb(o.x_colors[0]),r.hexToRgb(o.y_colors[Math.floor(o.y_colors.length/2)])),e=r.averageColors(r.hexToRgb(o.x_colors[o.x_colors.length-1]),r.hexToRgb(o.y_colors[Math.floor(o.y_colors.length/2)])),n=r.averageColors(t,e),a=r.darken(n,60),i=r.lighten(n,30),s=n.r/255,c=n.g/255,l=n.b/255,d={r:Math.min(Math.floor(n.r+200*(1-s)),255),g:Math.min(Math.floor(n.g+200*(1-c)),255),b:Math.min(Math.floor(n.b+200*(1-l)),255)};r.colors.bgcolor=d,r.colors.darkcolor=n,r.colors.ultradarkbgcolor=a,r.colors.ultradarkcolor=a,r.colors.darkcolor=n,r.colors.lightcolor=i,r.colors.ultralightcolor=d,r.colors.descriptioncolor=r.lighten(i,45),r.colors.headercolor=r.darken(a,25),$(".bgcolor").css("background-color",r.rgbToString(d)).data("bgcolor",d),$(".darkbgcolor").css("background-color",r.rgbToString(n)).data("bgcolor",n),$(".ultradarkbgcolor").css("background-color",r.rgbToString(a)).data("bgcolor",a),$(".bgcolor-transparent").css("background-color",r.rgbToString(d,.75)).data("bgcolor",d),$(".darkbgcolor-transparent").css("background-color",r.rgbToString(n,.7)).data("bgcolor",n),$(".ultradarkbgcolor-transparent").css("background-color",r.rgbToString(a,.75)).data("bgcolor",a),$(".ultradarkcolor").css("color",r.rgbToString(a)).data("color",a),$(".darkcolor").css("color",r.rgbToString(n)).data("color",n),$(".lightcolor").css("color",r.rgbToString(i)).data("color",i),$(".ultralightcolor").css("color",r.rgbToString(d)).data("color",d),$(".headercolor").css("color",r.rgbToString(r.colors.headercolor)).data("color",r.colors.headercolor),$(".descriptioncolor").css("color",r.rgbToString(r.colors.descriptioncolor)).data("color",r.colors.descriptioncolor)},n(),$(window).scroll(n),this.goDown=function(){var o=0;o=$("#userinforow").offset().top-120+$("#userinforow")[0].offsetHeight-$(window).height()>$("#userinforow").offset().top?$("#userinforow").offset().top-120:$("#userinforow").offset().top+$("#userinforow")[0].offsetHeight-$(window).height(),$("html, body").stop().animate({scrollTop:o},800)}}]),app.controller("PortfolioController",["$scope","$http","ColorService",function(o,t,r){var e=this;this.items=[];var n=this;t.get("res/portfolioitems.json").then(function(o){e.items=o.data;for(var t=0;t<e.items.length;t++)e.items[t].delay=.1*t+"s"}),this.drop=void 0,this.transformfunction=function(t,e){setTimeout(function(){var o=r.stringToRGB(t.color);$(".portfoliorow").stop().animate({height:$(".backcontainer").height()+120},500),$(".portfoliolightcolor").css("color",r.rgbToString(r.lighten(o,80))),$(window).scrollTop()>$(".portfoliorow").offset().top&&$("html, body").stop().animate({scrollTop:$(".portfoliorow").offset().top},200)},300),o.$apply(function(){n.item=t,n.drop={color:t.bgcolor?t.bgcolor:t.color,pos:{x:e.x,y:e.y}}})},$(".images img").load(function(){$(".portfoliorow").stop().animate({height:$(".backcontainer").height()+120},500)}),this.reset=function(){n.drop=void 0,n.item=void 0,$(".frontportfolio").removeClass("invisible"),$(".backportfolio").removeClass("visible"),setTimeout(function(){$(".portfoliorow").stop().animate({height:$(".frontportfolio").height()+120},800)},300)}}]),app.directive("ngDrop",function(){return{restrict:"AE",scope:{options:"@"},link:function(o,t,r,e){function n(){i=$(t).parent().width(),s=$(t).parent().height()+1500,l=$(t).parent().offset().left,d=$(t).parent().offset().top,c=Math.sqrt(i*i+s*s)}function a(o){f.css({position:"absolute","background-color":o.color,width:0,height:0,"border-radius":"50%",left:o.pos.x,top:o.pos.y,"margin-left":0,"margin-top":0,"webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",opacity:1,"pointer-events":"none","-webkit-transform":"translateZ(0)"}),f.stop().animate({width:2*c,height:2*c,"margin-left":-c,"margin-top":-c},{duration:600,easing:"easeInOutCubic",queue:!0})}var i=0,s=0,c=0,l=0,d=0,f=$("<div unselectable='on' id='circle'></div>");t.append(f),n(),$(window).resize(n),o.$watch("options",function(t){t?a(JSON.parse(o.options)):f.stop().animate({opacity:0},300)},!0)}}}),app.directive("ngHello",["ColorService",function(o){return{restrict:"AE",templateUrl:"/js/directives/hellocarddirective.html",link:function(t,r,e,n){function a(){$(r).find(".darkcolor").css({color:o.rgbToString(o.colors.darkcolor)}),$(r).find(".ultradarkcolor").css({color:o.rgbToString(o.colors.ultradarkcolor)}),$(r).find(".ultradarkbgcolor").css({"background-color":o.rgbToString(o.colors.ultradarkcolor)}),$(r).find(".darkbgcolor").css({"background-color":o.rgbToString(o.colors.darkcolor)}),$(r).find(".active .fa").css("color","#fff")}$(r).find(".fa").click(function(){$(r).find(".fronttextcard").toggleClass("current"),$(r).find(".backtextcard").toggleClass("current"),$(r).toggleClass("backactive")});var i=!1;t.$watch(function(){return o.colors},function(o){o&&!$.isEmptyObject(o)&&(i=!0,a())},!0),$(window).load(function(){$(r).css({opacity:1}),a()})}}}]),app.directive("ngNavigation",["ColorService",function(o){return{restrict:"AE",link:function(t,r,e,n){var a=void 0,i=[{name:"Home",element:$(".header"),icon:"home"},{name:"Skills",element:$("#skillrow"),icon:"lightbulb-o"},{name:"Experience",element:$("#experiencerow"),icon:"tasks"},{name:"Projects",element:$("#projectrow"),icon:"desktop"},{name:"Contact",element:$("#contactrow"),icon:"envelope-o"}];$(r).append("<span class='ultradarkcolor name'>Ives van Hoorne</span>");var s=$("<div class='bginfo'></div>");$(r).append(s),s.append("<span class='darkbgcolor bgrect'>Change</span>"),s.append("<span class='ultradarkbgcolor bgrect'>Colors</span>"),s.click(function(){t.resetBG()}),i.forEach(function(o){var t=$("<li></li>"),e=$("<i class='ultradarkcolor fa fa-"+o.icon+"'></i>");$(r).append(t);var n=$("<span class='detail'>"+o.name+"</span>");$(t).append(n),t.append(e),t.append(n),o.navitem=t,$(t).bind("mouseenter touchstart",function(){l(o)}),$(t).bind("mouseleave touchend",function(){a.navitem[0]!=t[0]&&d(o)}),$(t).click(function(){f(o)})});var c=function(o){for(var t=$("html").scrollTop(),r=$("body").scrollTop(),e=Math.max(t,r),n=0;n<i.length;n++){if(e<i[n].element.offset().top-$(window).height()/4){a&&a.navitem[0]==i[n-1].navitem[0]&&!o||(a&&(d(a),a.navitem.removeClass("active")),a=i[n-1],i[n-1].navitem.addClass("active"),i[n-1].element.addClass("visible"),ga("send","event",i[n-1].name,"scroll"),l(i[n-1]));break}n==i.length-1&&(a&&(d(a),a.navitem.removeClass("active")),a=i[n],i[n].navitem.addClass("active"),l(i[n]))}},l=function(t){t.navitem.css({"background-color":o.rgbToString(o.colors.darkcolor)}),t.navitem.find("i").css({color:"white"})},d=function(t){t.navitem.css({"background-color":""}),t.navitem.find("i").css({color:o.rgbToString(o.colors.ultradarkcolor)})},f=function(o){$("html, body").stop().animate({scrollTop:o.element.offset().top-59},800)},g=!1;t.$watch(function(){return o.colors},function(o){o&&!$.isEmptyObject(o)&&(g=!0,c(!0))},!0),$(window).scroll(function(){g&&c()})}}}]),app.directive("ngPortfolio",["ColorService",function(o){return{restrict:"AE",scope:{item:"@",transformfunction:"&"},link:function(t,r,e,n){function a(t){if($(r).empty(),c=$("<div class='portfoliocontainer'></div>"),c.css("background-color",t.color),r.append(c),t.front.image&&(l=$("<img src='"+t.front.image+"'></img>"),t.front.backgroundimage&&l.css({width:"100%"}),t.small&&l.css({width:"60%"}),c.append(l)),t.front.title&&(p=$("<div class='fronttitle'>"+t.front.title+"</div>"),c.append(p)),d=$("<div class='cover'></div>"),c.append(d),f=$("<div class='itemtitle'>"+t.name+"</div>"),f.css({color:o.rgbToString(o.lighten(o.stringToRGB(t.color),80))}),c.append(f),!t.small){var e=$("<div class='iconbox col s4'></div>"),n=$("<i class='icon fa fa-calendar-o'></i>"),a=$("<div class='text'>"+t.calendar+"</div>");e.append(n),e.append(a);var u=$("<div class='iconbox col s4'></div>"),h=$("<i class='icon fa fa-clock-o'></i>"),m=$("<div class='text'>"+t.progress+"</div>");u.append(h),u.append(m);var v=$("<div class='iconbox col s4'></div>"),b=$("<i class='icon fa fa-tasks'></i>"),w=$("<div class='text'>"+t.tasks+"</div>");v.append(b),v.append(w),c.append(v),c.append(e),c.append(u)}g=$("<p class='description "+(t.small?"small":"")+"'>"+t.shortdescription+"</p>"),c.append(g),t.small&&(f.addClass("small"),g.addClass("small")),i(),s()}function i(){r.hover(function(){c.children().addClass("hover")},function(){c.children().removeClass("hover")})}function s(){r.mousedown(function(o){c.children().removeClass("hover")}),r.click(function(o){var e=JSON.parse(t.item);ga("send","event","PortfolioItem","click",e.name),o.offsetX||(o.offsetX=o.pageX-$(o.target).offset().left,o.offsetY=o.pageY-$(o.target).offset().top),t.transformfunction({item:e,pos:{x:o.offsetX+$(r).position().left,y:o.offsetY+$(r).position().top}})})}var c,l,d,f,g,p;t.$watch("item",function(o){o&&a(JSON.parse(o))},!0),$(window).resize(function(){t.item&&a(JSON.parse(t.item))})}}}]),app.directive("ngProgress",function(){return{restrict:"AE",scope:{progress:"="},link:function(o,t,r,e){function n(){var r=t[0].offsetWidth;a.css({"z-index":2,display:"block",position:"absolute",left:0,height:"100%",width:r*o.progress,borderRadius:"inherit",backgroundColor:"inherit"}),i&&i.css({position:"absolute",display:"block",left:0,right:0,color:"white",textAlign:"center",width:r*o.progress,top:0,bottom:0})}var a=$("<div id='full'></div>"),i=$("<span id='text'>"+100*o.progress+"%</span>");$(t).append(a).append(i),$(window).resize(n),o.$watch("text",function(t){t&&i.text(o.text)},!0),n()}}}),app.directive("ngTrianglify",function(){return{restrict:"AE",scope:{options:"=",interval:"@"},link:function(o,t,r,e){function n(){return $(t).parent().css("height",t[0].offsetHeight),(t[0].offsetWidth>i||t[0].offsetHeight>s)&&(i=t[0].offsetWidth,s=t[0].offsetHeight,c.css("height",s),l.css("height",s),!0)}function a(){if(g){var t=Trianglify({width:i,height:s,cell_size:150});o.options=t.opts,f?(t.canvas(c[0]),l.fadeOut(1e3),f=!1):(t.canvas(l[0]),l.fadeIn(1e3),f=!0),g=!1,p=!1,setTimeout(function(){g=!0,p&&a()},1e3)}else p=!0}var i=0,s=0,c=$("<canvas id='bg1''></canvas>").css({"z-index":0,position:"absolute"}),l=$("<canvas id='bg2''></canvas>").css({"z-index":1,position:"absolute"});t.append(c),t.append(l),l.fadeOut(),n(),a();var d;o.$watch("interval",function(t){t&&!isNaN(t)&&t>0&&t<1e3?(d&&clearInterval(d),d=setInterval(function(){o.options=null,a()},Math.max(1e3,1e3*o.interval))):0==t&&d&&clearInterval(d)},!0),o.$watch("options",function(o){o||a()},!0),$(window).resize(function(){n()&&a()});var f=!0,g=!0,p=!1}}});